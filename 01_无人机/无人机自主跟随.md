---
title: 无人机自主跟随
tags:
  -  自主跟随
categories:
  - 奇思妙想
photos:
  - /images/图片名称
---

<blockquote class="blockquote-center">优秀的人，不是不合群，而是他们合群的人里面没有你</blockquote>

---

# 一. 背景

### 如今，大队无人机已经应用在××××有了广泛的应用，但是由于我们所处的工作环境特殊，不能充分发挥无人机优势，例如：在沙漠行进间就不能对无人机进行有效的操控，无法让无人机跟随载具，不能发挥无人机的作用；同时，无人机航线规划时间较长，而且发生特殊情况，无人机只能被迫降落。另外，无人机多次组装浪费时间较长，每次飞行操作手的重点在无人机控制上而不能认真观察无人机图像。

### 无人机自主跟随的主要解决两大需求：

#### 1. 一次性组装。到达预定地点后，无人机组装起飞，等待任务开始。
#### 2. 自主跟随。无人机会以载具的坐标点为参考进行跟随，减少了对无人机操控工作，把更多的心思放在无人机上。
#### 3. 自主规划航线。无人机自主规划更随航线。

# 二. 项目描述

### 本项目的创新有两点。

#### 1. 无人机自主跟随。无人机会根据载具的坐标点，进行参考跟随，无人机自主跟随后，无人机就可以在沙漠行进间使用，大大提高了无人机的效率，而且无人机操作手也有更多的时间进行观察图像，减少了无人机操作手在行进间对无人机的操控。也降低操作手的压力。

#### 2. 无人机自主规划航线。无人机会自动根据载具坐标计算下一个航点的坐标，这样无人机会以类似S型的样式进行跟随，这样可以在不操作云台的情况下拍摄更宽的面积。

# 三.  功能及总体设计

### 基于以上的创新，设计通过，地面站发送位置信息，飞机将信息转发给板载计算机，板载计算机通过计算出飞机的下一个航点，转发给飞控，指引无人机飞行。

### 1. 飞控简绍

#### 硬件：pixhawk是一套集成了传感器、输入输出功能及嵌入式处理芯片的电路板。它主要由两部分构成：PX4FMU和PX4IO。

#### 软件：PX4是专业自动驾驶仪。它由来自工业界和学术界的世界级开发商开发，并得到全球活跃社区的支持。其中的Navigator为外部的航线规划模块。此部分的代码在Firmware/src/modules/navigator，Navigator模块中要使用的核心状态集合我们称为导航状态，我们主要使用这个接口进行二次开发。

### 2. 板载计算机简绍

#### Raspberry3b（树莓派3b）：是由树莓派基金会研发的一种只有信用卡大小的单板机电脑，1.4GHz 64位4核 ARM Cortex-A53 CPU处理器；具有GPIO40引脚GPIO双排插针；使用5V供电，功耗一般在400ma-500ma（对树莓派的供电线要求高）。我们使用Raspberry进行航线的计算。

### 3. 模块简绍

#### 1) 原理介绍

##### 采用PX4与RaspberryPI3联合控制飞行, 他们之间使用串口通信，pixhawk将无人机状态 ( 系统状态、姿态、速度、位置、【home点位置信息、速度、磁航向】)，时时发送给RaspberryPI3，RaspberryPI3根据飞机当前状态，速度，与home点位置信息，进行自动航线规划，计算出飞机期望位置，期望速度，期望姿态，并实时发送给pixhawk，pixhawk运行PX4程序控制飞机，根据当前期望从而达到无人机跟踪home点，并以S形进行伴飞。

#### 2)  车载地面站介绍

##### 车载地面站主要工作是：1. 将车辆的坐标和航向通过数传发送给无人机pixhawk；2. 接收无人机状态信息，心跳包等。

#### 3）无人机简绍

##### 无人机采用pixhawk飞控，使用px4固件。主要工作是：1. 接收来自地面站的位置信息和控制信息；2. 接收板载计算机的航点坐标；3. 发送无人机状态信息给车载地面站和板载计算机。

#### 4） 板载计算机简绍

##### 板载计算机主要工作：1. 接收无人机的状态信息；2. 发送下一航点信息； 3. 计算下一航点坐标； 4. 检测无人机状态信息。

### 4. 总体规划

#### 1. 流程简绍

##### 1） 无人机组装、检查、测试，并以手动模式（或者任务模式）让无人机在home点上空盘旋。此为无人机起飞前准备阶段。
##### 2） 车载地面站开始发送位置信息，接收飞机状态，并检测无人机与板载计算机通信是否正常。此阶段为数据检测阶段。
##### 3） 通过遥控器或地面站，将无人机调制外部模式。现在无人机由板载计算机控制，板载计算机通过无人机的位置信息，车载地面站的位置信息，通过计算得到下一点的坐标，并发送给无人机。此阶段为自主控制阶段。
##### 4） 地面站开始查看图像传输情况和无人机状态，当无人机发生异常情况，可由手动将无人机调至返航模式。此阶段为监视剪短。

#### 2. 整体框架图

#### 3. 数据流图

# 四. 配件清单

### 1. 无人机（地面站、遥控器、电池等必备配件）
### 2. 板载计算机（raspberry3b、杜邦线、高质量电源线、电源）
### 3. GPS（数据线，等）

# 五. 目前存在问题分析

### 问题： 1. 当无人机使用外部模式的时候，无人机的高度是以home点的位置为基准，当时时给无人机发送信息时，无人机可能出现抖动的现象。
#### 解决方案： 以无人机自身测量高度为基准，同时在无人机上安装激光测距仪。

### 问题： 2. 板载计算机耗电、散热、性能问题；同时带给飞机的用电压力。
#### 解决方案：配备高质量电源线，对树莓派cpu进行加装风扇；尽量使用载重能力强的无人机。
