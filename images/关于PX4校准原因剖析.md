---
title: 关于PX4校准原因剖析
tags:
  -  十轴传感器
categories:
  - 无人机
  - PX4
photos:
  - 
---

<blockquote class="blockquote-center">有时候想想，最大的悲哀莫过于长大。笑不在纯粹，哭不在彻底</blockquote>

---


# 一、为什么我们每次对飞机校准都要转来转去

### 相信大家用过ＰＸ４的时候都有过连着数据线进行各种转圈，各种较重，然后还不能上数传。还有一种情况就是，在一个新的环境下，需要抱着飞机各种转圈圈。


# 二、回顾飞机十轴传感器

### 陀螺仪、加速度计、磁力计、气压计，这是十轴传感器。不懂可以去看前面的。

### 这样我们分析一个每个传感器的原理

### 陀螺仪
	- 陀螺仪：陀螺仪是测量无人机的X、Y、Z三轴的角速度，角度。他是通过重力做来标量，所以校准陀螺仪时，只要静静的把飞机的六个面静止水平面上就好


---

# 1.1 IMU

### 起飞前的安装校准，大部分都是在校准IMU的各个传感器的误差偏移。飞机核心设备IMU（惯性测量单位）。IMU用来检测当前飞机的姿态，飞控根据当前姿态做出调整，来保证飞行稳定。飞机在空中突然不稳定了，可能是IMU硬件收到干扰或软件bug。

### IMU包含磁力计、加速度计、陀螺仪，其中陀螺仪很重要，理论上讲陀螺仪可以测算出飞机的姿态，很遗憾陀螺仪会有积分飘逸，导致偏差很大。这时候就需要加速度计和磁力计来做校准。

### 陀螺仪：会有积分漂移，时间一长就会有数据不准，其次IMU半导体器件对温度敏感，所以IMU会收到温度的影响，一般商业飞控会给陀螺仪和加速度计做恒温。
[陀螺仪的误差分析及校准](https://wenku.baidu.com/view/bd7e958284868762caaed517.html)

[理论基础](https://wenku.baidu.com/view/b0231eaca0116c175e0e481f.html)


### 加速度计：对于震动比较敏感，所以飞控有减震措施。

### 磁力计： 对铁塔、铁块、变化的高电流。

# 减少传感器误差方法

### 陀螺仪： 飞控多次采集陀螺仪数据，求均值，得到零点漂移偏量。所以在校准陀螺仪时候要静止一段时间。

### 加速度计：做六面校准，利用每个轴的重力加速度来参考定标。如果飞机固定的角度往某个方向飘，多半是因为加速度计安装有误差，或者没有很好的校准。校准注意的是添加加速度计的减震，减少安装角度误差，六面校准的时候尽量横平竖直。

### 磁力计： 磁力计安装在飞机上的时候，可能会有硬磁干扰（电机上的磁铁，大功率恒定功率导线，软磁干扰（随时间磁场变化，通电导线变换电流）。在测试飞行时，要保持全速，因为这时候电流最大

